import{a as z,e as b,R as t,b as F,k as e,l as j,T as u,m as l,D as R,E as A,n as Y,P as m,C as M,U as p,V as D,W as f,X as S,Y as N,S as H,Z as L,K as d}from"./index-62f20919.js";import{I as g}from"./IconFileExport-fc1f83b7.js";const q=z(h=>({controlsContainer:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"}})),K=()=>{const{classes:h}=q(),{state:{token:x}}=b(),[r,k]=t.useState(new Date),[a,C]=t.useState(new Date),[c,W]=t.useState([]),{vehicleId:n}=F(),[w,y]=t.useState(!1),E=()=>{if(console.log("called search"),!n){d("Error","Invalid vehicle Id","error");return}i(r,a,n)},i=t.useCallback((s,o,v)=>{y(!0),console.log(s,o,v,x)},[x]);t.useEffect(()=>{n&&i(r,a,n)},[i,n]);const I=s=>{s&&k(s)},P=s=>{s&&C(s)},T=async()=>{const s=r||new Date,o=a||new Date;if(c.length===0){d("Export PDF","No data to export","error");return}d("Export PDF","Please wait...","success"),console.log(s,o)},_=c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx(j,{children:e.jsx(u,{color:l.titleText,children:"No data to display"})})})}):e.jsx(e.Fragment,{children:c.map((s,o)=>e.jsxs("tr",{children:[e.jsx("td",{children:s==null?void 0:s.name}),e.jsx("td",{children:R.fromISO(s.service_date).toFormat(A)}),e.jsx("td",{children:s.type_name}),e.jsx("td",{children:s.status_name}),e.jsx("td",{children:s.description})]},o))});return e.jsxs(Y,{spacing:m(5),children:[e.jsx(u,{fz:m(25),color:l.titleText,children:"Team Performance Report"}),e.jsxs(M,{radius:"md",shadow:"md",sx:{minHeight:"94vh"},children:[e.jsxs("div",{className:h.controlsContainer,children:[e.jsxs(p,{children:[e.jsx(D,{radius:"md",label:"Start Date",placeholder:"Pick Date",value:r,onChange:I,required:!0,withAsterisk:!1,icon:e.jsx(f,{size:"1.2rem",stroke:1.5,color:l.titleText}),styles:{input:{width:200}}}),e.jsx(D,{radius:"md",label:"End Date",placeholder:"Pick Date",value:a,onChange:P,required:!0,withAsterisk:!1,icon:e.jsx(f,{size:"1.2rem",stroke:1.5,color:l.titleText}),styles:{input:{width:200}}})]}),e.jsxs(p,{children:[e.jsx(S,{variant:"filled",radius:"md",leftIcon:e.jsx(g,{size:"1.2rem",stroke:2}),size:"sm",onClick:()=>E(),children:"Search"}),e.jsx(S,{variant:"filled",radius:"md",leftIcon:e.jsx(g,{size:"1.2rem",stroke:2}),size:"sm",onClick:T,children:"Export PDF"})]})]}),w?e.jsx(j,{mt:"xs",children:e.jsx(N,{size:"lg",variant:"dots"})}):e.jsx(H,{children:e.jsxs(L,{sx:{minWidth:"800px"},verticalSpacing:"sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Date/Time"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Description"})]})}),e.jsx("tbody",{children:_})]})})]})]})};export{K as default};
